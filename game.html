<!DOCTYPE html>
<HTML>
	<HEAD>
		<LINK HREF="style.css" REL="stylesheet" TYPE="text/css" />
		<SCRIPT LANGUAGE="javascript" SRC="engine/engine.js" TYPE="text/javascript"></SCRIPT>
		<SCRIPT LANGUAGE="javascript" SRC="engine/grid.js" TYPE="text/javascript"></SCRIPT>
		<SCRIPT LANGUAGE="javascript" SRC="engine/entity.js" TYPE="text/javascript"></SCRIPT>
		<SCRIPT LANGUAGE="javascript" SRC="engine/entity.floor.js" TYPE="text/javascript"></SCRIPT>
		<SCRIPT LANGUAGE="javascript" SRC="engine/entity.grass.js" TYPE="text/javascript"></SCRIPT>
		<SCRIPT LANGUAGE="javascript" SRC="engine/entity.player.js" TYPE="text/javascript"></SCRIPT>
		<SCRIPT LANGUAGE="javascript" SRC="engine/entity.stone.js" TYPE="text/javascript"></SCRIPT>
		<SCRIPT LANGUAGE="javascript" SRC="engine/entity.tree.js" TYPE="text/javascript"></SCRIPT>
		<SCRIPT LANGUAGE="javascript" SRC="engine/entity.wood.js" TYPE="text/javascript"></SCRIPT>
		<SCRIPT LANGUAGE="javascript" SRC="engine/entities.js" TYPE="text/javascript"></SCRIPT>
		<SCRIPT LANGUAGE="javascript" SRC="engine/world.js" TYPE="text/javascript"></SCRIPT>
		<SCRIPT LANGUAGE="javascript" SRC="engine/camera.js" TYPE="text/javascript"></SCRIPT>
		<SCRIPT LANGUAGE="javascript" SRC="engine/controls.js" TYPE="text/javascript"></SCRIPT>

		<SCRIPT LANGUAGE="javascript" TYPE="text/javascript">
		<!--
			var camera = undefined;

			var world = new World();

			for(var i = 0; i < 5000; i++)
			{
				var tree = new Tree();

				tree.X = (Math.floor(Math.random() * 128) - 64) << 4;
				tree.Y = (Math.floor(Math.random() * 128) - 64) << 4;

				world.Entities.Add(tree);
			}

			var player = new Player();

			player.X = 64;
			player.Y = 32;

			world.Entities.Add(player);

			//

			document.onkeydown = function(event)
			{
				Controls.OnKeyDown(event);
			};

			document.onkeyup = function(event)
			{
				Controls.OnKeyUp(event);
			};

			window.onload = function()
			{
				var element = document.getElementById('camera');

				if(!element)
				{
					return;
				}

				camera = new Camera(element);

				camera.Render(world);
			};

			window.onresize = function(event)
			{
				camera.OnResize(event);
			}

			Engine.AddListener(function()
			{
				camera.Render(world);
			});

			Engine.AddListener(function()
			{
				var x = 0;
				var y = 0;

				if(Controls.Directions['left'])
				{
					x -= player.Width;
				}

				if(Controls.Directions['right'])
				{
					x += player.Width;
				}

				if(Controls.Directions['up'])
				{
					y -= player.Height;
				}

				if(Controls.Directions['down'])
				{
					y += player.Height;
				}

				if(player.Scan(x, y))
				{
					return;
				}
				
				// Remove old player object
				player.World.Entities.Grid.Remove(player);
				player.X += x; // Update player obj coords
				player.Y += y; // ditto ^
				// Create new player obj in updated location
				player.World.Entities.Grid.Add(player);

				if(!camera)
				{
					return; // No camera, can't render
				}

				camera.X += x; // Adjust center of screen to track player
				camera.Y += y; // ditto ^

				camera.Render(world);
			});

		//-->
		</SCRIPT>
		<TITLE>I Wanna Be The Game: The Movie: The Game: The Game</TITLE>
	</HEAD>
	<BODY>
		<DIV ID="camera"></DIV>
	</BODY>
</HTML>
